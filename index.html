<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8" />
        <title>PedTest</title>

        <!-- PedTest references -->
        <link href="/css/default.css" rel="stylesheet">
        <!-- <script type="text/javascript" charset="utf-8" src="default.js"></script>-->
        <script type="text/javascript" charset="utf-8" src="mainprogram.js"></script>
        <script type="text/javascript" charset="utf-8" src="forwardlinear.js"></script>
        <script type="text/javascript" charset="utf-8" src="forwardsteps.js"></script>
        <script type="text/javascript" charset="utf-8" src="turngyro.js"></script>
        <script type="text/javascript" charset="utf-8" src="turncompass.js"></script>

        <script type="text/javascript" charset="utf-8" src="cordova.js"></script>
        <script type="text/javascript" charset="utf-8">

            function onDeviceReady() {
                //   alert("onDeviceReady");
                initialize();
            }
            function init() {
                document.addEventListener("deviceready", onDeviceReady, false);

            }
        </script>
    </head>

    <body onload="init();">
        <div style="position: absolute; top: -5px; left: 0px; right: 0px; bottom: 5px;
             width: 100%">
            <div class="Content">
                <h1 style="text-align:center"><b>Pedestrian Navigation Sensor Fusion App</b></h1>
                <p style=" visibility:hidden; display: inline-block; position: absolute; left: 8px; bottom: 614.68px; top: 64px;">Notes: Place on solid level surface, aligned to the path. Turn on all sensors, wait til values stabilize, and then press Reset.  World box shows motion since last accurate gps fix.  Calculated gps box shows fusing of both.  Press 'use gps' to capture and use current inaccurate gps, and compass values.
                    Adjust stride for step size.  Hold tablet like a lunch tray, Start walking.  You may need to pause after turning. Forward, Right, Left and U-turns only. Disable Debug messages for performance.</p>
            </div>
            <div style="text-align:center; position: absolute; height: 130px; width:110%; top: 100px;left:0;
                 border-width: thin; border-style: solid;"><b>SENSORS</b>
                <div style="text-align:left;position: absolute;left: 1px" >
                    <button id="AccelEnable"><b>Accel</b></button>  <b id="accelStatus">off</b>
                    <div class="item" id="accelOutput"><b>X:</b><b id="accelOutputX">no data</b>
                        <br />
                        <b>Y:</b><b id="accelOutputY">no data</b>
                        <br />
                        <b>Z:</b><b id="accelOutputZ">no data</b>
                        <br />
                    </div>
                </div>
                <div style="text-align:left;position: absolute;left: 23%">
                    <button id="GyroEnable"><b>Gyro</b></button><b id="gyroStatus">off</b>
                    <div class="item" id="gyroOutput">
                        <b>X:</b><b id="gyroOutputX">no data</b>
                        <br />
                        <b>Y:</b><b id="gyroOutputY">no data</b>
                        <br />
                        <b>Z:</b><b id="gyroOutputZ">no data</b>
                        <br />
                    </div>
                </div>
                <div style="text-align:left;position: absolute;left: 43%">
                    <button id="CompassEnable"><b>Compass</b></button><b id="compassStatus">off</b>
                    <div><b>Magnetic</b> </div>
                    <div>
                        <b> North:</b><b id="magneticNorth">no data</b>
                        <div style=" visibility:hidden;">
                            <b>TrueNorth:</b><b id="trueNorth">no data</b>
                        </div>
                    </div>
                </div>
                <div style=" text-align:left;position: absolute;left: 70%">
                    <button  id="GPSEnable"><b>GPS</b></button><b id="gpsStatus">off</b>
                    <div class="item" id="locationOutput">
                        <div style="visibility:hidden;height: 0px;" ><b>GPS Status:</b><b id="gps_status"></b>
                            <br />
                        </div>
                        <div style="visibility:hidden;height: 4px;"> <b>Position Status:</b><b id="position_status"></b>
                            <br />
                        </div>
                        <div ><b>Latitude:</b><b id="latitude">waiting ...</b>
                            <br />
                            <b> Longitude:</b><b id="longitude">waiting ...</b>
                            <br />
                            <b>Accuracy:</b><b id="accuracy">waiting ...</b>
                            <br />
                            <b>bearing:</b><b id="bearing">0</b>
                            <br />
                        </div>
                        <!--                   Altitude:<span id="altitude">waiting ...</span>
                                        <br />
                                        Alt Accuracy:<span id="altitudeAccuracy">waiting ...</span>
                                        <br />
                                        Heading:<span id="heading">waiting ...</span>
                                        <br />
                                        Speed:<span id="speed">waiting ...</span>
                                        <br />
                        -->
                    </div>
                </div>
            </div>
            <div id="DebugMessages" style="position: absolute; width: 100%; height: 200px;
                 left: 0; top: 235px; visibility: visible; border-width: 1px; border-style: solid;
                 border-color: #808080; overflow-y: scroll;">
                <table id="debugTable" border="0">
                    <tr>
                        <td style="font-size:larger;text-align:center;width: 332px; height: 20.5px;"><b >STEPS AND TURN</b></td>
                    </tr>
                </table>
            </div>
            <div id="MotionLog" style="position: absolute; width: 100%; height: 300px; left: 0px;
                 bottom:150px; visibility: hidden; border: 1px solid #808080; overflow-y: scroll;
                 -ms-transition-property: none;">
                <table id="motionlogTable" border="0" style="-ms-grid-columns: 2;">
                    <tr>
                        <td style="text-align:center;width: 332px; height: 20.5px;"><b>STEPS  AND TURNS</b></td>
                    </tr>
                </table>
            </div>
            <div id="Controls" style="position: absolute; width: 100%; height: 210px; left: 0px;
                 top: 440px; visibility: visible; border-width: 1px; border-style: solid; border-color: #808080;
                 overflow-y: scroll;">
                <button id="ButtonMode">Mode</button><b id="modeLabel" >Indoor</b>
                <button id="CalibrateButton" style="float: right;">Calibrate</button>
                <button id="ButtonReset" style="float: right;">Reset</button>
                <select id="pollRateSelect" aria-labelledby="listLabel" style="position: absolute;
                        left: 0px;top: 30px;">
                    <option value="16">Poll Rate 16 msecs.</option>
                    <option value="32">Poll Rate 32 msecs.</option>
                    <option value="64">Poll Rate 64 msecs.</option>
                    <option value="128">Poll Rate 128 msecs.</option>
                    <option value="256">Poll Rate 256 msecs.</option>
                </select>
                <button id="ButtonMotionType" style="position: absolute; left:0px;top: 55px; ">Motion Type</button>
                <b id="motionTypeLabel" style="position: absolute; left: 100px; top: 57px;">Step</b>
                <div id="sliderStride" style="position: absolute;left: 5px; top: 75px;width: 90%;padding-top: 5px;">
                    <b id="strideSliderLabel">Stride (m)</b>
                    <input class="sliderStrideValue" style="margin: 5px" type="range" id="StrideRange" min="0.0" max="1.0" value="0.50" step="0.01" />
                    <b style="float: right;">0.50</b>
                </div>
                <div id="sliderLabel1" style="position: absolute;left: 5px; top: 100px;width: 90%;padding-top: 5px;">
                    <b id="SliderOneLabel" >Samples between peaks</b>
                    <input class="samplesslider1" type="range" id="samplesSlider1" min="0" max="60" value="15" style="margin: 5px" step="1"/>
                    <b style="float: right;">15</b>
                </div>
                <div id="sliderLabel2" style="position: absolute;left: 5px; top: 125px;width: 90%;padding-top: 5px;">
                    <b id="SliderTwoLabel">Minimum peak to peak distance</b>
                    <input class="samplesslider2" type="range" id="samplesSlider2" min="0.0" max="1.0" value="0.2" style="margin: 5px" step="1" />
                    <b style="float: right;">0.2</b>
                </div>
                <button id="ButtonTurns" style="position: absolute; left: 0px; top: 160px;">Turns</button>
                <b id="turnLabel" style="position: absolute; left: 60px; top: 162px;">Snap</b>
                <div id="turn_thresholdLabel" style="position: absolute;left: 5px; top: 170px;width: 90%;padding-top: 5px;">
                    <b id="sliderturn_thresholdLabel">Turn threshhold(deg)</b>
                    <input class="sliderturn_thresholdValue" type="range" id="turn_thresholdslider" min="1" max="90" value="10" style="margin: 5px" step="1" />
                    <b style="float: right;">10</b>
                </div>
                <button id="DebugLogButton" style="visibility:hidden;position: absolute; right: 499.67px; left: 24px;
                        bottom: 26px; top: 417px; width: 112.67px;">Debug messages</button><b id="debuglogvalue" style="position: absolute; right: 451px; left: 146px; bottom: 21px;
                        top: 434px; width: 78.67px;"></b>
                <button id="MotionLogButton" style="visibility: hidden;position: absolute; right: 499.67px; left: 204px;
                        bottom: 26px; top: 417px; width: 112.67px;">Motion messages</button><b id="motionlogvalue" style="position: absolute; right: 451px; left: 325.33px; bottom: 24px;
                        top: 431px; width: 28.67px; text-align: right;"></b>
            </div>
            <div style="visibility:hidden;position: absolute; right: 319.5px; left: 235px; bottom: 215px; top: 640px;
                 width: 177px; height: 104px; border-width: thin; border-style: solid;"><b>World x, y orientation</b>
                <div class="item" id="worldxyorient">
                    <b> X:</b><span id="worldx">waiting ...</span>
                    <br />
                    <b> Y:</b><span id="worldy">waiting ...</span>
                    <br />
                    <b> Z:</b><span id="worldz">waiting ...</span>
                    <br />
                    <b>Orientation:</b><span id="worldo">waiting ...</span>
                    <br />
                </div>
            </div>
            <div style="visibility: hidden; position: absolute;text-align:center; right: 319.5px; left: 430px; bottom: 215px; top: 645px;
                 width: 343px; height: 104px; border-width: thin; border-style: solid;"><b>Calculated GPS</b>
                <button id="ForceGPScoorduse" style="position: absolute; right: 223px; left: auto;
                        bottom: 45px; top: 21px; width: 111px; word-wrap: normal; white-space: nowrap; line-height: 0px; height: auto; display: block; margin: 0px;"><b>USE GPS</b></button>
                <b id="forcegpsvalue" style="width: 332px; height: 20.5px;text-align: center;
                   position: absolute; right: 451px; left: 129px; bottom: 55px;
                   top: 29px; width: 57.67px;"></b>
                <div class="item" id="calculatedOutput" style="text-align:left;width: 176px; display: block; top: 61px; height: 43px; position: absolute; left: 3px;"><b>Latitdude:</b><span id="calclatitude" style="font-weight: bold;">waiting ...</span>
                    <br />
                    <b>Longitude:</b><span id="calclongitude" style="font-weight: bold;">waiting ...</span>
                    <br />
                    <div style="display: none;">    error lat:<span id="errorlat" ">waiting ...</span>
                        <br />
                        error long:<span id="errorlong" ">waiting ...</span>
                        <br />
                    </div> 
                </div>
            </div>
        </div>
    </body>
</html>
